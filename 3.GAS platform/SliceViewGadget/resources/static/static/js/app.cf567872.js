(function(){"use strict";var t={5376:function(t,e,a){var n=a(6848),i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},o=[],s=(0,n.defineComponent)({__name:"App",setup(t){return{__sfc:!0}}}),l=s,r=a(1656),c=(0,r.A)(l,i,o,!1,null,null,null),u=c.exports,d=a(6178),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("div",{staticClass:"head_box_title"},[t._v("Gas platform")]),e("div",{staticClass:"head_box"},[e("span",[t._v("slide：")]),e("el-select",{attrs:{placeholder:"Please select",clearable:"",filterable:""},on:{change:t.handleChange},model:{value:t.catalog,callback:function(e){t.catalog=e},expression:"catalog"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-switch",{staticStyle:{"margin-left":"20px"},attrs:{width:50,"active-value":"1","inactive-value":"0","active-color":"#fff","inactive-color":"#fff","active-text":"GAS-generated","inactive-text":"Initial"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),t.catalog?[e("span",{staticStyle:{"margin-left":"20px"}},[t._v("Magnification：")]),e("div",{staticClass:"zoom_txt"},[t._v(t._s(t.zoom)+"X")])]:t._e(),e("el-button",{staticStyle:{"margin-left":"auto"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("Segmentation")])],2),e("div",{staticClass:"content_bottom_box"},[e("div",{staticClass:"left_content"},[e("left-view",{key:"0",attrs:{text:"Initial"}}),e("left-view",{key:"1",staticStyle:{"margin-top":"60px"},attrs:{text:"GAS-generated"}})],1),e("div",{staticClass:"right_content"},[t.catalog&&t.isLoad?["0"===t.type||"1"===t.type?e("div",{staticClass:"content_leaflet_box"},[e("leaflet-page",{key:t.catalog+t.type,attrs:{type:t.type,catalog:t.catalog,initZoom:t.saveZoom,initCenter:t.initCenter},on:{onZoom:t.onZoom,destroyZoom:t.destroyZoom,onClientRect:t.onClientRect}})],1):t._e()]:e("div",{staticClass:"empty_box"},[e("el-empty",{attrs:{description:"Please select a directory","image-size":200}})],1)],2)]),e("el-dialog",{attrs:{title:"Note",visible:t.dialogVisible,width:"900px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.dialogVisible?e("CutSvgDialog",{on:{onSuccess:t.onSuccess},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}}):t._e()],1)],1)},p=[],f=(a(4114),function(){var t=this,e=t._self._c;return e("div",{staticClass:"leaflet_content",attrs:{id:t.catalog+t.type}})}),m=[],g=a(6886),v={data(){return{map:null,Grid:null,offSet:null,loadImages:[]}},methods:{drawGrid(t,e){const a=`${e.z},${e.x},${e.y}`;if(this.loadImages.includes(a))return!1;const n=this;this.map=t,this.Grid=new g.GridLayer({tileSize:512,noWrap:!0}),this.Grid.createTile=function(t){let i=g.DomUtil.create("canvas","leaflet-tile"),o=this.getTileSize();if(i.width=o.x,i.height=o.y,t.x===e.x&&t.y===e.y&&t.z===e.z){n.loadImages.push(a);let t=i.getContext("2d");var s=`${n.url}${n.catalog}/${n.newZoom}/${e.x}/${e.y}/1`,l=new Image;l.src=s,l.onload=function(){console.log(e),t.drawImage(l,0,0,o.x,o.y)}}return i},this.Grid.addTo(this.map)},canvansLineLat(t,e,a,n,i,o,s){const l=this.map.project({lat:t,lng:a.lng},n.z);l.y-n.y*i.y>=0&&l.y-n.y*i.y<=i.y&&(t-=this.offSet.lat,o.strokeStyle=s,o.beginPath(),o.moveTo(0,l.y-n.y*i.y-1),o.lineTo(i.y,l.y-n.y*i.y-1),o.closePath(),o.stroke(),this.canvansLineLat(t,e,a,n,i,o,s))},canvansLineLng(t,e,a,n,i,o,s){const l=this.map.project({lat:a.lat,lng:t},n.z);l.x-n.x*i.x>=0&&l.x-n.x*i.x<=i.x&&(t+=this.offSet.lng,o.strokeStyle=s,o.beginPath(),o.moveTo(Math.abs(l.x-n.x*i.x),0),o.lineTo(Math.abs(l.x-n.x*i.x),i.x),o.closePath(),o.stroke(),this.canvansLineLng(t,e,a,n,i,o,s))},latLngToTileNumber(t,e){const a=this.map.getZoom();return console.log(a),{x:Math.floor((e+180)/360*Math.pow(2,a)),y:Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,a)),z:a}}}},b={name:"LeafletPage",mixins:[v],props:{type:{type:String,default:""},catalog:{type:String,default:""},initZoom:{type:Number,default:1},initCenter:{type:Object,default:()=>({})}},data(){return{zoomMap:{1:1,2:2,3:5,4:10,5:20},map:null,boxRect:{width:0,height:0},newZoom:1,url:"/view/getImg/"}},methods:{initBox(){const{width:t,height:e}=this.$el.getBoundingClientRect();this.$set(this.boxRect,"width",t),this.$set(this.boxRect,"height",e),this.$nextTick((()=>{this.onLoad()}))},onLoad(){if(this.map=g.map(`${this.catalog}${this.type}`,{crs:g.CRS.Simple,center:[0,0],zoom:1,minZoom:1,maxZoom:5,zoomControl:!0,attributionControl:!1}),this.initCenter&&this.initCenter.lat&&this.initCenter.lng)this.map.setView([this.initCenter.lat,this.initCenter.lng]);else{const{lat:t,lng:e}=this.map.containerPointToLatLng({x:this.boxRect.width,y:this.boxRect.height});this.map.setView([t,e])}1!==this.initZoom&&this.map.setZoom(this.initZoom);let t=g.tileLayer("",{tileSize:512});t.getTileUrl=t=>{const{x:e,y:a,z:n}=t;return this.newZoom=this.zoomMap[n],`${this.url}${this.catalog}/${this.newZoom}/${e}/${a}/${this.type}`},t.addTo(this.map),this.map.on("click",(t=>{if("1"===this.type)return!1;const e=t.latlng;let a=this.map.project(e,this.map.getZoom()).divideBy(512).floor();const n={x:a.x,y:a.y,z:this.map.getZoom()};this.drawGrid(this.map,n)}))},clearCacheAndReinitializeMap(){this.map.eachLayer((t=>{this.map.removeLayer(t)}))}},watch:{newZoom:{immediate:!0,handler:function(t){this.$emit("onZoom",t)}}},beforeDestroy(){if(this.map){const{lat:t,lng:e}=this.map.getCenter();this.$emit("onClientRect",{lat:t,lng:e});const a=this.map.getZoom();this.$emit("destroyZoom",a),this.clearCacheAndReinitializeMap()}},computed:{},mounted(){this.initBox()},created(){}},y=b,x=(0,r.A)(y,f,m,!1,null,"f7dbd392",null),_=x.exports,C=a(4660),w=a.n(C),S=a(5596),k=a.n(S),$=a(4373),L=a(3518);n["default"].use(L.Ay);var j=new L.Ay.Store({state:{},getters:{},mutations:{},actions:{},modules:{}});const P={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"};$.A.defaults.headers["Content-Type"]="application/json;charset=utf-8";const Z=$.A.create({baseURL:"",timeout:6e5});function T(t){return new Promise(((e,a)=>{let n=new FileReader;n.onload=function(){let t=n.result,e=JSON.parse(t);if("401"===e.header.code)jumpLogin(),a({message:"请登录"});else if("20000"===e.header.code)a(e.header);else{const t=e.header.message?e.header.message:"未知错误";k()({showClose:!0,message:t,type:"error"}),a({code:e.header.code,message:t})}},n.readAsText(t.data)}))}Z.interceptors.request.use((t=>{if("get"===t.method&&t.params){let e=t.url+"?";for(const a of Object.keys(t.params)){const n=t.params[a];let i=encodeURIComponent(a)+"=";if(null!==n&&"undefined"!==typeof n)if("object"===typeof n)for(const t of Object.keys(n)){let i=a+"["+t+"]",o=encodeURIComponent(i)+"=";e+=o+encodeURIComponent(n[t])+"&"}else e+=i+encodeURIComponent(n)+"&"}e=e.slice(0,-1),t.params={},t.url=e}return t}),(t=>{Promise.reject(t)})),Z.interceptors.response.use((async t=>{if("blob"!==t.config.responseType){const e=t.data.code||"200",a=P[e]||t.data.msg||P["default"];return 500===e?(k()({showClose:!0,message:a,type:"error"}),Promise.reject(a)):5001===e?Promise.reject(t.data.body.data):200!==e?(w().error({title:a}),Promise.reject("error")):{data:t.data.data,msg:t.data.msg}}if("[object Blob]"!==Object.prototype.toString.call(t.data))return Promise.reject(new Error("导出文件发生未知错误！"));if(!t.data.type.includes("application/json")){if(t.headers["content-disposition"]){const e=t.headers["content-disposition"].match(/(?<=filename=).*(?=;)/g)||t.headers["content-disposition"].match(/(?<=filename=).*/g)||[];return{blob:t.data,filename:e.join(",")?decodeURI(e.join(",")):""}}return k()({showClose:!0,message:"获取文件名失败",type:"error",duration:3e3}),Promise.reject("获取文件名失败！")}await T(t).then((()=>{})).catch((t=>Promise.reject(t)))}),(t=>{console.log("err"+t);let{message:e}=t;return"Network Error"==e?e="后端接口连接异常":e.includes("timeout")?e="系统接口请求超时":e.includes("Request failed with status code")&&(e="系统接口"+e.substr(e.length-3)+"异常"),k()({showClose:!0,message:e,type:"error",duration:3e3}),Promise.reject(t)}));var z=Z;function M(){return z({url:"/view/getDirList",method:"get"})}function R(){return z({url:"/view/getImgList",method:"get"})}function A(t){return z({url:"/view/tileImg",method:"post",data:t})}var O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cutSvgDialog_box"},[e("div",{staticClass:"head_box"},[e("span",[t._v("Status：")]),e("el-select",{attrs:{placeholder:"Please select",clearable:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{staticClass:"table_box"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"table_cut",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"50vh"}},[e("el-table-column",{attrs:{width:"85",label:"Select",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-checkbox",{attrs:{"true-label":a.row.fileName},on:{change:t.changeSelect},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})]}}])}),e("el-table-column",{attrs:{prop:"fileName",label:"File",align:"center"}}),e("el-table-column",{attrs:{prop:"status",label:"Status",align:"center",width:"220"},scopedSlots:t._u([{key:"default",fn:function(a){return[1===a.row.status?e("span",[t._v("Done")]):t._e(),0===a.row.status?e("span",[t._v("Pending")]):t._e()]}}])})],1)],1),e("div",{staticClass:"btn_footer"},[e("el-button",{on:{click:t.handleClose}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSure}},[t._v("OK")])],1)])},I=[],V={name:"CutSvgDialog",model:{prop:"inputValue",event:"modelVal"},components:{},mixins:[],props:{inputValue:Boolean},data(){return{type:"",options:[{label:"All",value:""},{label:"Done",value:1},{label:"Pending",value:0}],tableData:[],tableList:[],checked:"",tableLoading:!1}},methods:{changeSelect(t){this.checked="",this.$nextTick((()=>{this.checked=t}))},init(){this.tableLoading=!0,R().then((t=>{this.tableList=t.data||[],this.handleChange(this.type)})).catch((()=>{})).finally((()=>{this.tableLoading=!1}))},handleChange(t){this.checked="",this.tableData=""!==t?this.tableList.filter((e=>e.status===t)):this.tableList},handleClose(){this.$emit("modelVal",!1)},handleSure(){if(!this.checked)return this.$message({showClose:!0,message:"Please select a file",type:"warning"}),!1;const t=this.$loading({lock:!0,text:"Slicing in..."}),e=new FormData;e.append("fileName",this.checked),A(e).then((e=>{t.close(),this.$message({showClose:!0,message:e.msg||"Sliced successfully",type:"success"}),this.$emit("onSuccess")})).catch((()=>{t.close()}))}},watch:{type:{immediate:!0,handler:function(t){this.handleChange(t)}}},computed:{},mounted(){this.init()},created(){}},D=V,G=(0,r.A)(D,O,I,!1,null,"78cec287",null),N=G.exports,U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"LeftView_box"},[e("div",{staticClass:"bnt_1_content"},[e("span",{staticClass:"title"},[t._v(t._s(t.text)+" diagnosis")]),e("div",{staticClass:"btn_box"},[e("span",{class:{active:1===t.btn1},on:{click:function(e){t.btn1=1}}},[t._v("Malignant")]),e("span",{class:{active:2===t.btn1},on:{click:function(e){t.btn1=2}}},[t._v("Benign")])])]),e("div",{staticClass:"bnt_1_content",staticStyle:{"margin-top":"30px"}},[e("span",{staticClass:"title2"},[t._v(t._s(t.text)+" confidence")]),e("div",{staticClass:"btn2_box"},[e("div",{staticClass:"top_box"},[e("span",{staticClass:"color_1",class:{active:1===t.btn2},on:{click:function(e){t.btn2=1}}},[t._v("1")]),e("span",{staticClass:"color_2",class:{active:2===t.btn2},on:{click:function(e){t.btn2=2}}},[t._v("2")]),e("span",{staticClass:"color_3",class:{active:3===t.btn2},on:{click:function(e){t.btn2=3}}},[t._v("3")])]),t._m(0)])])])},B=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bottom_box"},[e("div",{staticClass:"sanjiaoxing"}),e("div",{staticClass:"sanjiaoxing_txt"},[e("span",[t._v("Low")]),e("span",[t._v("High")])])])}],E={name:"LeftView",props:{text:{type:String}},components:{},data(){return{btn1:0,btn2:0}},methods:{},watch:{},computed:{},mounted(){},created(){}},F=E,q=(0,r.A)(F,U,B,!1,null,"41abe8d8",null),H=q.exports,J={name:"MapDemo",components:{LeftView:H,CutSvgDialog:N,LeafletPage:_},mixins:[],props:{},data(){return{dialogVisible:!1,type:"0",catalog:"",options:[],zoom:1,initCenter:{lat:0,lng:0},saveZoom:1,isLoad:!1}},methods:{init(){const t=this.$loading({lock:!0,text:"初始化中..."});M().then((t=>{for(let e=0,a=t.data.length;e<a;e++)this.options.push({label:t.data[e],value:t.data[e]})})).catch((()=>{})).finally((()=>{t.close()}))},handleChange(){this.isLoad=!1,this.saveZoom=1,this.$set(this.initCenter,"lat",0),this.$set(this.initCenter,"lng",0),this.$nextTick((()=>{this.isLoad=!0}))},onZoom(t){this.zoom=t},onClientRect(t){this.$set(this.initCenter,"lat",t.lat),this.$set(this.initCenter,"lng",t.lng)},destroyZoom(t){this.saveZoom=t},onSuccess(){this.dialogVisible=!1,this.init()}},watch:{},computed:{},mounted(){this.init()},created(){}},K=J,W=(0,r.A)(K,h,p,!1,null,"77f84886",null),X=W.exports;n["default"].use(d.Ay);const Q=[{path:"/",name:"home",component:X}],Y=new d.Ay({mode:"history",routes:Q});var tt=Y,et=a(3832),at=a.n(et),nt=a(4355),it=a.n(nt),ot=a(3194),st=a.n(ot),lt=a(3950),rt=a.n(lt),ct=a(4351),ut=a.n(ct),dt=a(5125),ht=a.n(dt),pt=a(6272),ft=a.n(pt),mt=a(3797),gt=a.n(mt),vt=a(353),bt=a.n(vt),yt=a(3952),xt=a.n(yt),_t=a(630),Ct=a.n(_t),wt=a(1120),St=a.n(wt),kt=a(874),$t=a.n(kt),Lt=a(2672),jt=a.n(Lt),Pt=a(4054),Zt=a.n(Pt),Tt=a(6210),zt=a.n(Tt),Mt=a(1275),Rt=a.n(Mt),At=a(4621),Ot=a.n(At),It=a(9507),Vt=a.n(It),Dt=a(3436),Gt=a.n(Dt),Nt=a(1362),Ut=a.n(Nt),Bt=a(5319),Et=a.n(Bt),Ft=a(8339),qt=a.n(Ft),Ht=a(9940),Jt=a.n(Ht),Kt=a(6535),Wt=a.n(Kt),Xt=a(1178),Qt=a.n(Xt),Yt=a(2381),te=a.n(Yt),ee=a(1227),ae=a.n(ee),ne=a(5235),ie=a.n(ne),oe=a(175),se=a.n(oe),le=a(7999),re=a.n(le),ce=a(1040),ue=a(2806);ue["default"].use(ce.A),n["default"].prototype.$ELEMENT={size:"medium"},n["default"].use(re()),n["default"].use(se()),n["default"].use(ie()),n["default"].use(ae()),n["default"].use(te()),n["default"].use(Qt()),n["default"].use(Wt()),n["default"].use(Jt()),n["default"].use(qt()),n["default"].use(Et()),n["default"].use(Ut()),n["default"].use(Gt()),n["default"].use(Vt()),n["default"].use(Ot()),n["default"].use(Rt()),n["default"].use(zt()),n["default"].use(Zt()),n["default"].use(jt()),n["default"].use($t()),n["default"].use(St()),n["default"].use(Ct()),n["default"].use(xt()),n["default"].use(bt()),n["default"].use(gt()),n["default"].use(ft()),n["default"].use(ht()),n["default"].use(ut()),n["default"].use(rt()),n["default"].use(st()),n["default"].use(it().directive),n["default"].prototype.$loading=it().service,n["default"].prototype.$msgbox=at(),n["default"].prototype.$alert=at().alert,n["default"].prototype.$confirm=at().confirm,n["default"].prototype.$prompt=at().prompt,n["default"].prototype.$notify=w(),n["default"].prototype.$message=k(),n["default"].config.productionTip=!1,new n["default"]({router:tt,store:j,render:t=>t(u)}).$mount("#app")}},e={};function a(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,n,i,o){if(!n){var s=1/0;for(u=0;u<t.length;u++){n=t[u][0],i=t[u][1],o=t[u][2];for(var l=!0,r=0;r<n.length;r++)(!1&o||s>=o)&&Object.keys(a.O).every((function(t){return a.O[t](n[r])}))?n.splice(r--,1):(l=!1,o<s&&(s=o));if(l){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[n,i,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,o,s=n[0],l=n[1],r=n[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(r)var u=r(a)}for(e&&e(n);c<s.length;c++)o=s[c],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(u)},n=self["webpackChunkleafletjs_66"]=self["webpackChunkleafletjs_66"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(5376)}));n=a.O(n)})();